<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Charity Water Game</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Simple visually hidden heading for screen readers -->
    <h1 class="sr-only">Welcome to the Charity Water Game Prototype</h1>

    <!-- First screen: Main menu / intro -->
    <div id="screen-1" class="app-screen screen-center">
        <div class="card intro-card">
            <h2>Adam's Ale — Community Well Project</h2>
            <p class="lead">Welcome! Build a well, place tools, and deliver water to the village.</p>
            <!-- Wireframe preview: replace img/wireframe.png with your exported Figma PNG to show the frame here -->
            <div class="wireframe-preview" style="margin:12px 0;">
                <img src="img/wireframe.png" alt="Wireframe preview" onerror="this.style.display='none'" style="max-width:100%;border-radius:8px;box-shadow:0 4px 12px rgba(2,6,23,0.08);" />
                <!-- fallback inline placeholder shown when the PNG is not present -->
                <svg class="wireframe-placeholder" width="360" height="220" viewBox="0 0 360 220" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" style="border-radius:8px;display:block;">
                    <rect width="360" height="220" rx="8" fill="#ffffff" stroke="#e6eef6" />
                    <rect x="16" y="16" width="120" height="24" rx="4" fill="#f3f4f6" />
                    <rect x="16" y="52" width="328" height="140" rx="6" fill="#fbfdff" stroke="#eef2f7" />
                    <text x="20" y="40" fill="#6b7280" font-size="12">Intro wireframe (drop your PNG as <tspan font-weight="bold">img/wireframe.png</tspan>)</text>
                </svg>
            </div>
            <div class="intro-actions">
                <button id="startBtn" class="btn primary">Start Mission</button>
                <button id="loadBtn" class="btn">Continue (Load)</button>
                <button id="demoLoadBtn" class="btn">Demo Load (1s)</button>
            </div>
            <div style="margin-top:8px;">
                <a class="btn" href="https://www.figma.com/proto/dcjWRW8CHaVQE1QV38d0yE/Adam-s-Ale?node-id=0-1&t=o031IUey9KEXQKv1-1" target="_blank" rel="noopener noreferrer">Open Figma Wireframe</a>
            </div>
            <p class="small">This prototype uses simple HTML/CSS/JS so students can learn DOM programming.</p>
        </div>
    </div>

    <!-- Second screen: Desktop / Laptop layout -->
    <div id="screen-2" class="app-screen hidden">
        <header class="app-header">
            <div class="left">
                <button id="backBtn" class="btn">← Back</button>
                <h2>Adam's Ale — Community Well Project</h2>
            </div>
            <div class="right">
                <button id="helpBtn" class="btn">Help</button>
            </div>
        </header>

        <main class="app-main">
            <!-- Left panel: player / mission info -->
            <aside class="panel left-panel">
                <section class="profile card">
                    <h3>Player</h3>
                    <p id="playerName">Player 1</p>
                    <p>Funds: $<span id="funds">100</span></p>
                    <p>Water Delivered: <span id="waterDelivered">0</span> L</p>
                </section>

                <section class="mission card">
                    <h3>Mission</h3>
                    <p>Build a well and deliver water to the village.</p>
                    <button id="startMission" class="btn primary">Start Mission</button>
                </section>
            </aside>

            <!-- Center: map / placement area -->
            <section class="game-area card">
                <h3>Site Map</h3>
                <div id="mapGrid" class="map-grid" aria-label="Site map">
                    <!-- map tiles generated by JS -->
                </div>

                <div class="map-actions">
                    <button id="deliverWater" class="btn primary">Deliver Water (+10L)</button>
                    <span id="statusText" class="status">Select a tool from the shop and click a tile to place it.</span>
                </div>
            </section>

            <!-- Right panel: shop / items -->
            <aside class="panel right-panel">
                <section class="shop card">
                    <h3>Shop</h3>
                    <div id="shopList" class="shop-list">
                        <!-- shop items generated by JS -->
                    </div>
                </section>

                <section class="inventory card">
                    <h3>Inventory</h3>
                    <ul id="inventoryList">
                        <li>No items placed yet.</li>
                    </ul>
                </section>
            </aside>
        </main>

        <footer class="app-footer">
            <small>Desktop preview — responsive layout intended for laptop/desktop</small>
        </footer>
    <!-- Jerrycan thematic loader (non-blocking) -->
    <div id="jerryLoader" class="loading-overlay hidden" role="status" aria-live="polite" aria-hidden="true">
        <div class="loader">
            <div class="jerrycan-box" style="position:relative;">
                <!-- Inline SVG jerrycan: water rect has class 'water' that we animate with CSS/JS -->
                <svg class="jerrycan" viewBox="0 0 68 84" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <defs>
                        <clipPath id="canClip"><rect x="8" y="6" width="52" height="68" rx="6" ry="6"/></clipPath>
                    </defs>
                    <rect x="0" y="0" width="68" height="84" rx="6" fill="#FFC907" />
                    <g clip-path="url(#canClip)">
                        <!-- Water rectangle. We'll animate scaleY from 0 -> 1. transform-box handled in CSS. -->
                        <rect class="water" x="8" y="6" width="52" height="68" fill="#60A5FA" />
                    </g>
                </svg>
                <div class="splash" style="position:absolute; left:50%; transform:translateX(-50%); bottom:8px;">
                    <div class="drop"></div>
                    <div class="drop"></div>
                    <div class="drop"></div>
                </div>
            </div>

            <div class="loader-text">
                <div id="jerryLoaderMessage">Loading...</div>
                <div id="jerryLoaderPercent" class="loader-percent">0%</div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>